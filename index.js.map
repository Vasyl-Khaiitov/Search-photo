{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = (axios.defaults.API_KEY = '49359087-343ead2b9467da8fb57304bcb');\nconst BASE_URL = (axios.defaults.baseURL = 'https://pixabay.com/api/');\n\nexport async function requestServer(query) {\n    let page = 1;\n    let per_page = 15;\n\n    const options = {\n        params: {\n            key: API_KEY,\n            q: query.trim(),\n            image_type: 'photo',\n            orientation: 'horizontal',\n            page: page,\n            per_page: per_page,\n            safesearch: 'true',\n        },\n    };\n\n    const response = await axios.get(BASE_URL, options);\n    const { hits } = response.data;\n    return hits;\n}\n\n\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = null;\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n// Все в одній\nexport function updateGallery(hits) {\n    clearGallery();\n    markupPhoto(hits);\n}\n// Приховування\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n// Показ\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector(\".gallery\");\n\nexport function markupPhoto(hits = []) {\n    gallery.innerHTML = \"\";\n    \n    const galleryMarkup = hits\n    .map(hit =>\n        `<li class=\"gallery-item\">\n        <a href=\"${hit.largeImageURL}\" class=\"gallery-item-link\">\n        <img class=\"gallery-img\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"text-info\">\n        <p><b>Likes:</b>${hit.likes}</p>\n        <p><b>Views:</b>${hit.views}</p>\n        <p><b>Comments:</b>${hit.comments}</p>\n        <p><b>Downloads:</b>${hit.downloads}</p>\n        </div>\n        </li>`\n    )\n    .join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup)\n\n       if (!lightbox) {\n                lightbox = new SimpleLightbox(\".gallery a\", {\n                    caption: true,\n                    captionType: \"attr\",\n                    captionsData: \"alt\",\n                    captionPosition: \"bottom\",\n                    captionDelay: 250\n                });\n            } else {\n                lightbox.refresh();\n            }\n\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { requestServer } from \"./js/pixabay-api\";\nimport { updateGallery, showLoader, hideLoader } from './js/render-functions';\n\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', onSubmit);\n\n\nexport async function onSubmit(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n\n    const { searchText } = form.elements;\n    const correctValueText = searchText.value.trim();\n\n    if (!correctValueText) {\n        iziToast.show({\n            title: \"⛔\",\n            message: 'Please write a search query!',\n            color: 'yellow',\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    showLoader();\n\n    try {\n        const hits = await requestServer(correctValueText)\n\n        if (!Array.isArray(hits)) {\n            console.error(\"Invalid response structure. Hits is not an array.\");\n            iziToast.show({\n                title: \"⚠️\",\n                message: 'Unexpected response format. Please try again later!',\n                color: 'red',\n                position: \"topRight\"\n            });\n            hideLoader();\n            return ;\n        }\n\n        if (hits.length === 0) {\n            iziToast.show({\n                title: \"❌\",\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n                position: \"topRight\"\n            });\n            hideLoader();\n            return;\n        }\n\n        updateGallery(hits);\n        form.reset();\n\n    } catch (error) {\n\n        let errorMessage = 'An unexpected error occurred. Please try again later!';\n\n        if (error.response) {\n            errorMessage = `Server Error: ${error.response.data.message || error.message}`;\n        } else if (error.request) {\n            errorMessage = 'Network Error: Failed to reach the server. Please check your internet connection.';\n        }\n\n        iziToast.show({\n            title: \"⚠️\",\n            message: errorMessage,\n            color: 'red',\n            position: \"topRight\"\n        });\n        console.error(\"Error:\", error.message);\n    }\n\n    hideLoader();\n}\n\n"],"names":["API_KEY","axios","BASE_URL","requestServer","query","options","response","hits","lightbox","clearGallery","gallery","updateGallery","markupPhoto","showLoader","loader","hideLoader","galleryMarkup","hit","SimpleLightbox","form","onSubmit","event","searchText","correctValueText","iziToast","error","errorMessage"],"mappings":"owBAEA,MAAMA,EAAWC,EAAM,SAAS,QAAU,qCACpCC,EAAYD,EAAM,SAAS,QAAU,2BAEpC,eAAeE,EAAcC,EAAO,CAIvC,MAAMC,EAAU,CACZ,OAAQ,CACJ,IAAKL,EACL,EAAGI,EAAM,KAAM,EACf,WAAY,QACZ,YAAa,aACb,KATG,EAUH,SATO,GAUP,WAAY,MACf,CACT,EAEUE,EAAW,MAAML,EAAM,IAAIC,EAAUG,CAAO,EAC5C,CAAE,KAAAE,CAAI,EAAKD,EAAS,KAC1B,OAAOC,CACX,CCpBA,IAAIC,EAAW,KAER,SAASC,GAAe,CAC3BC,EAAQ,UAAY,EACxB,CAEO,SAASC,EAAcJ,EAAM,CAChCE,IACAG,EAAYL,CAAI,CACpB,CAEO,SAASM,GAAa,CACzBC,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASC,GAAa,CACzBD,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCJ,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASE,EAAYL,EAAO,GAAI,CACnCG,EAAQ,UAAY,GAEpB,MAAMM,EAAgBT,EACrB,IAAIU,GACD;AAAA,mBACWA,EAAI,aAAa;AAAA,wCACIA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,0BAGhDA,EAAI,KAAK;AAAA,0BACTA,EAAI,KAAK;AAAA,6BACNA,EAAI,QAAQ;AAAA,8BACXA,EAAI,SAAS;AAAA;AAAA,cAGtC,EACA,KAAK,EAAE,EACRP,EAAQ,mBAAmB,YAAaM,CAAa,EAE7CR,EASIA,EAAS,QAAO,EARhBA,EAAW,IAAIU,EAAe,aAAc,CACxC,QAAS,GACT,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClC,CAAiB,CAKjB,CClDA,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAQ,EAGjC,eAAeA,EAASC,EAAO,CAClCA,EAAM,eAAc,EAEpB,MAAMF,EAAOE,EAAM,cAEb,CAAE,WAAAC,CAAU,EAAKH,EAAK,SACtBI,EAAmBD,EAAW,MAAM,KAAI,EAE9C,GAAI,CAACC,EAAkB,CACnBC,EAAS,KAAK,CACV,MAAO,IACP,QAAS,+BACT,MAAO,SACP,SAAU,UACtB,CAAS,EACD,MACH,CAEDX,IAEA,GAAI,CACA,MAAMN,EAAO,MAAMJ,EAAcoB,CAAgB,EAEjD,GAAI,CAAC,MAAM,QAAQhB,CAAI,EAAG,CACtB,QAAQ,MAAM,mDAAmD,EACjEiB,EAAS,KAAK,CACV,MAAO,KACP,QAAS,sDACT,MAAO,MACP,SAAU,UAC1B,CAAa,EACDT,IACA,MACH,CAED,GAAIR,EAAK,SAAW,EAAG,CACnBiB,EAAS,KAAK,CACV,MAAO,IACP,QAAS,2EACT,MAAO,MACP,SAAU,UAC1B,CAAa,EACDT,IACA,MACH,CAEDJ,EAAcJ,CAAI,EAClBY,EAAK,MAAK,CAEb,OAAQM,EAAO,CAEZ,IAAIC,EAAe,wDAEfD,EAAM,SACNC,EAAe,iBAAiBD,EAAM,SAAS,KAAK,SAAWA,EAAM,OAAO,GACrEA,EAAM,UACbC,EAAe,qFAGnBF,EAAS,KAAK,CACV,MAAO,KACP,QAASE,EACT,MAAO,MACP,SAAU,UACtB,CAAS,EACD,QAAQ,MAAM,SAAUD,EAAM,OAAO,CACxC,CAEDV,GACJ"}